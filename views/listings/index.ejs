<% layout('/layouts/boilerPlate.ejs') %>

  <body>
    <!-- icons secitions -->
    <div class="bg-white mx-auto py-4 px-3 sticky-top shadow-sm" style="top: 56px; z-index: 1020;">
      <div class="d-flex flex-column flex-lg-row justify-content-between align-items-start align-items-lg-center">

        <!-- Center: Category Icons (no wrap on lg and up) -->
        <div class="d-flex flex-nowrap overflow-auto category-scroll w-100 justify-content-lg-center mb-3 mb-lg-0">

          <a href="/listings" class="category-item text-center px-3 text-decoration-none text-dark">
            <i class="fas fa-bed fa-lg d-block mb-1"></i><small>Rooms</small>
          </a>

          <a href="/listings" class="category-item text-center px-3 text-decoration-none text-dark">
            <i class="fas fa-mountain-sun fa-lg d-block mb-1"></i><small>Views</small>
          </a>

          <a href="/listings" class="category-item text-center px-3 text-decoration-none text-dark">
            <i class="fas fa-city fa-lg d-block mb-1"></i><small>Cities</small>
          </a>

          <a href="/listings" class="category-item text-center px-3 text-decoration-none text-dark">
            <i class="fas fa-water fa-lg d-block mb-1"></i><small>Surfing</small>
          </a>

          <a href="/listings" class="category-item text-center px-3 text-decoration-none text-dark">
            <i class="fas fa-swimmer fa-lg d-block mb-1"></i><small>Pools</small>
          </a>

          <a href="/listings" class="category-item text-center px-3 text-decoration-none text-dark">
            <i class="fas fa-umbrella-beach fa-lg d-block mb-1"></i><small>Beach</small>
          </a>

          <a href="/listings" class="category-item text-center px-3 text-decoration-none text-dark">
            <i class="fas fa-house fa-lg d-block mb-1"></i><small>Cabins</small>
          </a>

          <a href="/listings" class="category-item text-center px-3 text-decoration-none text-dark">
            <i class="fas fa-bolt fa-lg d-block mb-1 text-danger"></i><small>OMG!</small>
          </a>

          <a href="/listings" class="category-item text-center px-3 text-decoration-none text-dark">
            <i class="fas fa-water fa-lg d-block mb-1"></i><small>Lakefront</small>
          </a>

          <a href="/listings" class="category-item text-center px-3 text-decoration-none text-dark">
            <i class="fas fa-fire fa-lg d-block mb-1 text-warning"></i><small>Trending</small>
          </a>

        </div>

        <div
          class="d-flex flex-column flex-lg-row justify-content-between align-items-start align-items-lg-center gap-3">

          <!-- Scrollable Category Bar -->
          <div class="d-flex flex-nowrap overflow-auto category-scroll w-100 justify-content-lg-center mb-3 mb-lg-0">
            <!--  category icons here -->
          </div>

          <!-- Controls Section (Right Side) -->
          <div
            class="d-flex align-items-center justify-content-between justify-content-lg-end w-100 w-lg-auto flex-wrap flex-lg-nowrap gap-2">

            <!-- Only on large screens: scroll and filter -->
            <div class="d-none d-lg-flex gap-2 align-items-center">
              <button class="btn btn-light" onclick="scrollRight()">
                <i class="fas fa-chevron-right"></i>
              </button>
              <button class="btn btn-outline-secondary">
                <i class="fas fa-sliders-h me-1"></i> Filters
              </button>
            </div>

            <!-- Toggle -->
            <div class="form-check-reverse form-switch d-flex align-items-center toggleTax">
              <label class="form-check-label toggle-label mx-2 pt-1 px-3 text-nowrap" for="toggleTaxes">
                Display total after taxes
              </label>
              <input class="form-check-input me-1" type="checkbox" id="toggleTaxes">
            </div>

          </div>
        </div>




      </div>
    </div>



    <!--  page  starting here -->
    <div class="container my-2">
      <div class="row row-cols-1 row-cols-sm-1 row-cols-md-2 row-cols-lg-3 g-4">
        <% for(let listing of allListings) { %>
          <a href="/listings/<%= listing._id %>" class="ankerLink">
            <div class="col">
              <div class="card h-100 shadow-sm border-none">
                <img src="<%= listing.image.url %>" class="card-img-top rounded-3" alt="listing_image"
                  style="height:18rem;">
                <div class="card-img-overlay"></div>
                <div class="card-body">
                  <h6 class="card-title mb-1">
                    <%= listing.title %>
                  </h6>
                  <p class="card-text text-muted price">â‚¹ <%= listing.price %>/night
                      <i class="tax-Info"> &nbsp; +18% GST</i> </p>
                </div>
              </div>
            </div>
            <% } %>
          </a>
      </div>
    </div>
    <form action="/listings">
      <button
        class="btn btn-primary d-flex align-items-center my-4 mx-auto justify-content-center w-25 h-100 border border-1">
        See More
      </button>
    </form>

    <!-- Scroll Function -->
    <script>
      function scrollRight() {
        const scrollContainer = document.querySelector('.category-scroll');
        scrollContainer.scrollBy({
          left: 100, // Adjust this value for how far you want to scroll
          behavior: 'smooth'
        });
      }
      let toggleTaxes = document.getElementById("toggleTaxes")
      toggleTaxes.addEventListener('click', () => {
        let tax_Info = document.getElementsByClassName("tax-Info")
        for (let info of tax_Info) {
          if (info.style.display != "inline") {
            info.style.display = "inline";

          } else {
            info.style.display = "none";

          }
        }
      })
    </script>
  </body>